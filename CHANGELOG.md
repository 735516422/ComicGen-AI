# 更新日志

所有重要的项目更改都将记录在此文件中。

## [1.0.1] - 2024-10-20

### ✨ 升级

#### 豆包 API 升级到 SeeDream 4.0
- 🚀 **API 端点更新**：从 `/v3/text2image` 升级到 `/v3/images/generations`
- 🎨 **模型更新**：使用最新的 `doubao-seedream-4-0-250828` 模型
- 🎯 **新增参考图片支持**：可提供参考图片URL，保持角色一致性
- 📺 **支持流式输出**：可选择流式返回生成进度
- 🖼️ **更高分辨率**：支持 2K (2048x2048) 高清输出
- ⚡ **更快生成速度**：优化的生成算法
- 🎛️ **更多控制选项**：水印开关、响应格式选择等

### 🔧 技术改进
- 更新 `app/api/generate-image/route.ts` 使用新版 API
- 更新 `app/api/test-doubao/route.ts` 测试端点
- 优化错误日志和调试信息
- 改进响应数据处理，支持多种返回格式

### 📝 文档更新
- 更新 `DOUBAO_SETUP.md` 添加 SeeDream 4.0 说明
- 更新 `API_CONFIG.md` 添加新版 API 测试命令
- 添加详细的参数说明和使用示例

### 🔄 向后兼容
- 保持环境变量名 `STABILITY_API_KEY` 不变
- 旧版 API 测试仍然可用作备用方案

---

## [1.0.0] - 2024-10-19

### ✨ 新增功能

#### 核心功能
- 🎬 AI 自动生成漫画剧本（基于 DeepSeek）
- 🎨 AI 自动生成漫画画格（基于 Stable Diffusion XL）
- ✏️ 可视化剧本编辑器
- 🔄 角色一致性检测
- 📤 多格式导出（长图、九宫格）

#### 页面实现
- ✅ 首页 / 创作入口页
  - 主题输入
  - 风格选择（日式、美式、条漫、Q版）
  - 格数设置（1-12格）
  - 角色描述
  - 参考图上传
  
- ✅ 剧本编辑页
  - 分镜脚本展示
  - 对白编辑
  - AI 对白优化
  - 单格重新生成
  - 添加/删除分镜
  
- ✅ 漫画生成页
  - 批量/单独生成画格
  - 实时进度显示
  - 角色一致性开关
  - 一致性评分
  - 单格重绘
  
- ✅ 预览导出页
  - 完整漫画预览
  - 导出公众号长图（900px）
  - 导出九宫格
  - 保存项目文件

#### 技术实现
- ✅ Next.js 15 App Router 架构
- ✅ TailwindCSS + shadcn/ui 组件库
- ✅ Zustand 状态管理
- ✅ TypeScript 类型系统
- ✅ API 路由（剧本生成、图片生成、对白优化）
- ✅ Mock 数据支持（无需 API 密钥即可体验）

### 🎨 UI/UX
- 现代化扁平设计风格
- 明亮配色（黄/蓝/白）
- 响应式布局（移动端/桌面端）
- 流畅的动画过渡
- 加载状态反馈
- Toast 提示系统

### 📝 文档
- ✅ 完整的 README.md
- ✅ 快速入门指南 (QUICKSTART.md)
- ✅ 更新日志 (CHANGELOG.md)
- ✅ 代码注释

### 🔧 配置
- ✅ TypeScript 配置
- ✅ TailwindCSS 配置
- ✅ Next.js 配置
- ✅ ESLint 配置
- ✅ 环境变量模板

## [未来计划]

### v1.1.0 - 增强编辑功能
- [ ] 拖拽排序分镜
- [ ] 对话气泡样式自定义
- [ ] 分格布局编辑器
- [ ] 更多漫画风格选项

### v1.2.0 - 云端功能
- [ ] 用户认证系统
- [ ] 云端项目存储（Supabase）
- [ ] 项目分享功能
- [ ] 在线协作编辑

### v1.3.0 - 高级功能
- [ ] AI 自动配色
- [ ] 批量导出和打包
- [ ] 视频导出（动态漫画）
- [ ] PDF 导出
- [ ] 水印自定义

### v2.0.0 - 企业版
- [ ] 多人协作
- [ ] 版本控制
- [ ] 素材库管理
- [ ] API 接口开放
- [ ] 私有化部署

---

## 版本说明

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
版本号遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

### 类型说明
- `新增` - 新功能
- `变更` - 现有功能的变化
- `废弃` - 即将移除的功能
- `移除` - 已移除的功能
- `修复` - 错误修复
- `安全` - 安全相关的修复

